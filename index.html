<!-- http://socket.io/get-started/chat/ -->
<!doctype html>
<html>
<head>
<title>charts...</title>

<script src="/jquery.min.js"></script>


<script src="/Chart.min.js"></script>

</head>
<body>
<!-- line chart canvas element -->
<canvas id="chart0" width="600" height="400"></canvas>
<canvas id="chart1" width="600" height="400"></canvas>
<canvas id="chart2" width="600" height="400"></canvas>
<canvas id="chart3" width="600" height="400"></canvas>

</body>


<script type="text/javascript">


$.get( "example.dat", function( dados ) {
		console.log( "Data Loaded: " + dados );
		
		var allTextLines = dados.split('\n');
		var labels = [];
		var lines = [];
		var dadosOrganizados = [];
		
		for (var i = 0; i < allTextLines.length; i++) {
			var data = allTextLines[i].split(';');
			if (data.length == 5) {
			
			var tarr = [];
			for (var j = 1; j < data.length; j++) {
				var inteiro = parseInt(data[j]);
				
				if(typeof inteiro !== "number" || isNaN(inteiro)){
					tarr.push(0);
				}else{
					tarr.push(inteiro);
				}
			}
			lines.push(tarr);
			
			}
		}
		
		for (var i = 0; i < allTextLines.length; i++) {
			var data = allTextLines[i].split(';');
			labels.push(data[0]);
		}
		lines = transpose(lines);
		
		
		for (var i = 0; i < 4; i++) {
		
			var canvas = document.getElementById('chart'+i),
			ctx = canvas.getContext('2d'),
			startData = {
				labels: labels,
				datasets: [
					{
						fillColor: "rgba(151,187,205,0.2)",
						strokeColor: "rgba(151,187,205,1)",
						pointColor: "rgba(151,187,205,1)",
						pointStrokeColor: "#fff",
						data: lines[i],
					}
				]
			};
			
			// startingData.datasets[0].data = data;
			// Reduce the animation steps for demo clarity.
			var myLiveChart = new Chart(ctx).Line(startData, {animationSteps: 15});
		}
		
		
});

function transpose(a) {
	return Object.keys(a[0]).map(function (c) {
			return a.map(function (r) {
					return r[c];
			});
	});
}

</script>

<script>

</script>
</html>